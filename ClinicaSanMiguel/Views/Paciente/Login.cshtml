@model ClinicaSanMiguel.DTOs.LoginRequestDto

@{
    ViewData["Title"] = "Iniciar Sesión - Mi Vida San Pablo";
}

<!-- Login Section inspirado en 02.png -->
<section class="login-section">
    <div class="container-fluid">
        <div class="row justify-content-center align-items-center min-vh-100">
            <div class="col-md-6 col-lg-5">
                <div class="login-card">
                    <!-- Logo y header -->
                    <div class="text-center mb-4">
                        <div class="clinic-logo mb-3">
                            <span class="clinic-name h4 ms-2 text-primary">SAN MIGUEL</span>
                        </div>
                    </div>

                    <!-- Card de bienvenida -->
                    <div class="welcome-card-login text-center mb-4">
                        <h3 class="welcome-text">Bienvenido</h3>
                        <p class="welcome-subtitle">
                            Puedes reservar tus citas médicas el mismo día y<br>
                            puedes pagarla tan sólo con un click.
                        </p>

                        <!-- Botones de tipo de documento -->
                        <div class="document-type-buttons mb-3">
                            <button type="button" class="btn btn-primary document-btn active" data-type="1">DNI</button>
                            <button type="button" class="btn btn-outline-primary document-btn" data-type="2">Carnet extranjería</button>
                            <button type="button" class="btn btn-outline-primary document-btn" data-type="3">Pasaporte</button>
                        </div>

                        <!-- Formulario de login -->
                        <form asp-action="Login" method="post" class="login-form">
                            <input asp-for="IdTipoDocumento" type="hidden" id="hiddenDocType" value="1" />
                            
                            <div class="form-group mb-3">
                                <label class="form-label text-start w-100">Número de documento</label>
                                <input asp-for="Documento" class="form-control" placeholder="72671009" maxlength="20" required />
                                <span asp-validation-for="Documento" class="text-danger"></span>
                            </div>

                            <div class="form-group mb-3">
                                <label class="form-label text-start w-100">Contraseña*</label>
                                <div class="password-input-group">
                                    <input asp-for="Password" type="password" class="form-control" placeholder="••••••••" required />
                                    <button type="button" class="btn password-toggle">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <span asp-validation-for="Password" class="text-danger"></span>
                            </div>

                            <!-- Mensajes de error y éxito -->
                            @if (ViewBag.Error != null)
                            {
                                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                    <i class="fas fa-exclamation-triangle me-2"></i>@ViewBag.Error
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                </div>
                            }

                            @if (TempData["Mensaje"] != null)
                            {
                                <div class="alert alert-success alert-dismissible fade show" role="alert">
                                    <i class="fas fa-check-circle me-2"></i>@TempData["Mensaje"]
                                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                </div>
                            }

                            <button type="submit" class="btn btn-warning btn-lg w-100 login-submit">Ingresar</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Imagen decorativa -->
            <div class="col-md-6 d-none d-md-block">
                <div class="login-image-container text-center">
                    <img src="https://images.pexels.com/photos/5407249/pexels-photo-5407249.jpeg"
                         alt="Doctor profesional" class="img-fluid rounded">
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Manejo de botones de tipo de documento
            $('.document-btn').click(function() {
                $('.document-btn').removeClass('active').addClass('btn-outline-primary').removeClass('btn-primary');
                $(this).addClass('active').removeClass('btn-outline-primary').addClass('btn-primary');
                $('#hiddenDocType').val($(this).data('type'));
            });

            // Toggle de contraseña
            $('.password-toggle').click(function() {
                const input = $(this).siblings('input');
                const icon = $(this).find('i');
                
                if (input.attr('type') === 'password') {
                    input.attr('type', 'text');
                    icon.removeClass('fa-eye').addClass('fa-eye-slash');
                } else {
                    input.attr('type', 'password');
                    icon.removeClass('fa-eye-slash').addClass('fa-eye');
                }
            });
        });
    </script>
}

